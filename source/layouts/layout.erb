<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title><%= current_page.data.title || "The Middleman" %></title>

    <%= stylesheet_link_tag "all" %>
    <%= javascript_include_tag  "all" %>
  </head>

  <body class="<%= page_classes %>">
    <%= partial 'layouts/sidebar' %>
    <div class="wrap">
          <div class="masthead">
            <div class="container">
              <h3 class="masthead-title">
                <a href="/" title="Home">Design Helper</a>
                <small></small>
              </h3>
            </div>
          </div>

          <div class="container content">
            <%= yield %>
          </div>
        </div>

        <label for="sidebar-checkbox" class="sidebar-toggle"></label>

        <script>
          (function(document) {
            var toggle = document.querySelector('.sidebar-toggle');
            var sidebar = document.querySelector('#sidebar');
            var checkbox = document.querySelector('#sidebar-checkbox');
            document.addEventListener('click', function(e) {
              var target = e.target;
              if(!checkbox.checked ||
                 sidebar.contains(target) ||
                 (target === checkbox || target === toggle)) return;
              checkbox.checked = false;
            }, false);
          })(document);
        </script>
  </body>
</html>
